apiVersion: v1
kind: ConfigMap
metadata:
  name: gitlab-values
  namespace: gitlab-cluster
  labels:
    reconcile.fluxcd.io/watch: Enabled
data:
  values.yaml: |
    global:
      edition: ce
      hosts:
        domain: gl.m1xxos.tech
        gitlab:
          name: gl.m1xxos.tech
          https: true
        registry:
          name: registry.gl.m1xxos.tech
          https: true
        kas:
          name: kas.gl.m1xxos.tech
        pages:
          name: pages.gl.m1xxos.tech
          https: true
        ssh: gl.m1xxos.tech
      ingress:
        enabled: false
        configureCertmanager: false
      gatewayApi:
        enabled: true
        installEnvoy: false
        gatewayRef:
          name: "traefik-gateway"
          namespace: "traefik"
      time_zone: "Europe/Moscow"
      redis:
        host: dragonfly-gl.gitlab
        port: 6379
        auth:
          enabled: true
          secret: dragonfly-gl
          key: password
      psql:
        host: gitlab-rails-db-global-rw.gitlab
        password:
          secret: gitlab-rails-db-app
          key: password
      minio:
        enabled: false
      registry:
        bucket: registry
      pages:
        enabled: true
        objectStore:
          enabled: true
          bucket: gitlab-pages
          connection:
            secret: gitlab-object-storage
            key: connection
      appConfig:
        object_store:
          enabled: true
          connection:
            secret: gitlab-object-storage
            key: connection
        artifacts:
          enabled: true
          bucket: gitlab-artifacts
        lfs:
          enabled: true
          bucket: git-lfs
        uploads:
          enabled: true
          bucket: gitlab-uploads
        packages:
          enabled: true
          bucket: gitlab-packages
        externalDiffs:
          enabled: true
          bucket: gitlab-mr-diffs
        terraformState:
          enabled: true
          bucket: gitlab-terraform-state
        ciSecureFiles:
          enabled: true
          bucket: gitlab-ci-secure-files
        dependencyProxy:
          enabled: true
          bucket: gitlab-dependency-proxy
        backups:
          bucket: gitlab-backups
          tmpBucket: tmp
      gitaly:
        persistence:
          size: 15Gi
    redis:
      install: false
    postgresql:
      install: false
    gitlab:
      toolbox:
        backups:
          objectStorage:
            backend: s3
            config:
              secret: gitlab-object-storage
              key: config
    installCertmanager: false
    nginx-ingress: &nginx-ingress
      enabled: false
